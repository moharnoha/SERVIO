<!DOCTYPE html>
<html lang="ar" dir="rtl" class="notranslate" translate="no"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SERVIOCMM - Final Header</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --header-green: #2E5822; --sub-green: #386E2C; --white: #ffffff; }
        body { margin: 0; font-family: 'Inter', sans-serif; direction: rtl; background: #f7fafc; }

        .header-wrapper { position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }

        /* الهيدر العلوي - عرض الاسم */
        .top-nav { height: 65px; background: var(--header-green); display: flex; align-items: center; justify-content: space-between; padding: 0 15px; }
        .user-info { display: flex; align-items: center; gap: 10px; color: var(--white); }
        .welcome-msg { display: flex; flex-direction: column; }
        .welcome-msg .user-name { font-size: 13px; font-weight: 800; color: #FFD700; } /* لون ذهبي للاسم */
        .welcome-msg .label { font-size: 10px; opacity: 0.8; }

        /* الهيدر السفلي - الرصيد والأزرار */
        .bottom-nav { background: var(--sub-green); padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; }
        
        .wallet-box { background: rgba(255,255,255,0.15); padding: 6px 15px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 8px; }
        .wallet-box .amount { color: var(--white); font-size: 18px; font-weight: 800; }
        
        .nav-btn { background: rgba(255,255,255,0.1); border-radius: 8px; padding: 8px 12px; color: var(--white); text-decoration: none; font-size: 13px; font-weight: 700; display: flex; align-items: center; gap: 6px; }
        
        svg.icon { width: 20px; height: 20px; fill: var(--white); }
    </style>
</head>
<body>

<div class="header-wrapper">
    <div class="top-nav">
        <div class="user-info">
            <img src="https://i.postimg.cc/xjLGtL73/tsmym-bdwn-ʿnwan.png" height="30">
            <div class="welcome-msg">
                <span class="label">مرحباً بك،</span>
                <span id="display-name" class="user-name">جاري التحميل...</span>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div style="display: flex; gap: 8px;">
            <a href="/deposit" class="nav-btn">
                <svg class="icon" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                إيداع
            </a>
        </div>

        <div class="wallet-box">
            <span id="display-balance" class="amount">0.00</span>
            <svg class="icon" viewBox="0 0 24 24"><path d="M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2-.9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
        </div>
    </div>
</div>

<script>
    // هذه الدالة تراقب التغييرات في Firebase فوراً
    function startRealTimeUpdates(userId) {
        db.collection("users").doc(userId).onSnapshot((doc) => {
            if (doc.exists) {
                const data = doc.data();
                // تحديث الاسم (name)
                document.getElementById('display-name').innerText = data.name || "مستخدم";
                // تحديث الرصيد (balance)
                document.getElementById('display-balance').innerText = parseFloat(data.balance || 0).toFixed(2);
            }
        });
    }

    // استدعاء الدالة باستخدام الـ ID الذي ظهر في صورتك
    window.onload = () => {
        const myUserId = "YRkKR5DVR3Vjmn9URulA"; 
        startRealTimeUpdates(myUserId);
    };
</script>

</body>
</html>
